# Story 1.3: Basic App Shell and Navigation

## Status

Ready for Review

## Story

As a user,
I want to see a clean, functional three-column note-taking interface after logging in,
so that I can navigate between notebooks, browse notes, and edit content efficiently.

## Acceptance Criteria

1. Create three-column layout: Notebooks sidebar (left), Notes list (middle), Note editor (right)
2. Implement responsive navigation with collapsible sidebars for mobile
3. Add user profile section in header with logout option
4. Create placeholder pages for notebooks, settings, and help
5. Implement basic routing between main sections
6. Add loading states and error boundaries
7. Create consistent layout components (buttons, inputs, modals)
8. Implement Material UI theming system with light theme
9. Add keyboard shortcuts for navigation
10. Ensure mobile-responsive design with drawer navigation
11. **NEW:** Implement "Add Notebook" and "Add Notes" buttons with yellow styling matching Figma design
12. **NEW:** Create modal dialog infrastructure for notebook and note creation
13. **NEW:** Add modal overlay and positioning system for consistent UX

## Tasks / Subtasks

- [x] Build three-column app shell layout (AC: 1)
  - [x] Left sidebar: Notebooks navigation with header, add button, and notebook list
  - [x] Middle column: Notes list with header, search bar, view toggle, and note items
  - [x] Right column: Note editor with title, content area, and formatting toolbar
  - [x] Implement proper column sizing and responsive behavior
- [x] Implement responsive navigation (AC: 2, 10)
  - [x] Mobile drawer for notebooks sidebar
  - [x] Collapsible notes list on smaller screens
  - [x] Touch-friendly breakpoints and targets
- [x] Header profile and logout (AC: 3)
  - [x] Display user name/avatar from Firebase auth state
  - [x] Add logout action integrated with Firebase auth service
- [x] Create placeholder content (AC: 4)
  - [x] Sample notebooks with titles and descriptions
  - [x] Sample notes with content and formatting
  - [x] Settings and help placeholder pages
- [x] Implement routing structure (AC: 5)
  - [x] Define routes for notebooks, notes, settings, help
  - [x] Active link styling with yellow accent bars
  - [x] Focus states and keyboard navigation
- [x] Add loading and error boundaries (AC: 6)
  - [x] Global error boundary with fallback UI
  - [x] Route-level suspense loading spinners
  - [x] Network error handling for offline states
- [x] Create Material UI components and theming (AC: 7, 8)
  - [x] Base components: Button, Input, Modal, List, ListItem
  - [x] Material UI theme with light theme colors
  - [x] Typography and spacing system
- [x] Implement keyboard shortcuts (AC: 9)
  - [x] Navigation shortcuts (e.g., g+n notebooks, g+s settings)
  - [x] Note editing shortcuts (e.g., Ctrl+S save, Ctrl+N new)
  - [x] Accessible skip links and focus management
- [x] **NEW:** Add notebook and notes creation buttons (AC: 11)
  - [x] Create yellow "+" button next to "Notebooks" header
  - [x] Create yellow "+" button next to "Notes" header
  - [x] Implement button styling matching Figma design specifications
  - [x] Add click handlers for modal triggers
- [x] **NEW:** Modal dialog infrastructure (AC: 12, 13)
  - [x] Create reusable modal component with overlay
  - [x] Implement modal positioning and z-index management
  - [x] Add modal close functionality (X button, overlay click, ESC key)
  - [x] Create modal animation and transition effects

## Dev Notes

### Architecture Context

Based on the [Figma design reference](https://www.figma.com/design/J4Dsi0o3FCgCgqrvPCAehY/Untitled?node-id=1-3430&t=InvbSxuXYBe13O3F-4), the app requires a three-column layout matching the note-taking interface design.

### Technical Stack Requirements

[Source: architecture/biblion-architecture-frontend-only-google-drive-storage-pwa-ready.md#tech-stack]

- React 18.2.0 with TypeScript 5.4.5
- Vite 5.2.0 as bundler with HMR
- React Router 6.26.2 for SPA routing
- Material UI 5.15.20 as UI component library with theming
- Firebase 10.12.2 for authentication
- Emotion for styled components

### Project Structure

[Source: architecture/biblion-architecture-frontend-only-google-drive-storage-pwa-ready.md#project-folder-structure]

- Layout components: `src/components/layout/`
- UI components: `src/components/ui/`
- App shell: `src/app/App.tsx`
- Theme configuration: `src/app/theme.ts`
- Routes: `src/app/routes.tsx`

### Three-Column Layout Design

Based on the Figma design, implement:

- **Left Column (Notebooks)**: Header with "Notebooks" title and yellow add button, vertical icon stack, notebook list with titles, descriptions, and timestamps
- **Middle Column (Notes)**: Header with "Notes" title and yellow add button, search bar with "Q Search notes" placeholder, view toggle (list/grid), note list with titles, descriptions, and timestamps
- **Right Column (Editor)**: Note title, timestamp, content area with formatted text, bottom formatting toolbar with bold, italic, underline, alignment, lists, blockquote, code, share, history, and menu icons
- Home header/title should surface the versioned name "Biblion 1.0" as specified in Story 1.4

### Material UI Theme Requirements

[Source: architecture/biblion-architecture-frontend-only-google-drive-storage-pwa-ready.md#tech-stack]

- Light theme as primary theme
- Yellow accent color for active states and buttons
- Typography system with proper hierarchy
- Spacing system for consistent layout

### Authentication Integration

[Source: architecture/biblion-architecture-frontend-only-google-drive-storage-pwa-ready.md#firebase-integration]

- Firebase Authentication with Google provider
- User profile display from Firebase auth state
- Logout functionality integrated with Firebase auth service

### Testing

- Component tests: three-column layout renders correctly; responsive behavior at breakpoints
- Routing tests: navigation changes route and highlights active link with yellow accent
- Accessibility checks: tab order, focus traps for modals, ARIA roles
- Material UI component integration tests

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4 (via Cursor)

### Debug Log References
- Implemented three-column layout with Material UI components
- Created responsive navigation with mobile drawer
- Added yellow accent buttons matching Figma design
- Implemented modal infrastructure for notebook/note creation
- Added keyboard shortcuts for common actions
- Created placeholder pages for settings and help

### Completion Notes
- ✅ Three-column layout fully implemented with proper responsive behavior
- ✅ Mobile navigation with collapsible drawer working correctly
- ✅ User profile section with logout functionality integrated
- ✅ Yellow accent buttons added to match Figma design specifications
- ✅ Modal dialogs for adding notebooks and notes with proper validation
- ✅ Keyboard shortcuts implemented for common actions (Ctrl+N, Ctrl+S, etc.)
- ✅ Material UI theming system with light theme and yellow accents
- ✅ Loading states and error boundaries already present in App.tsx
- ✅ Placeholder content created for settings and help pages
- ✅ Routing structure updated to include new pages

### File List
- `src/components/layout/AppShell.tsx` - Main three-column layout component
- `src/components/layout/NotebooksSidebar.tsx` - Left sidebar with notebooks list
- `src/components/layout/NotesList.tsx` - Middle column with notes list and search
- `src/components/layout/NoteEditor.tsx` - Right column with note editor
- `src/components/ui/Modal.tsx` - Reusable modal component
- `src/components/ui/AddNotebookModal.tsx` - Modal for creating new notebooks
- `src/components/ui/AddNoteModal.tsx` - Modal for creating new notes
- `src/components/ui/LoadingState.tsx` - Loading state components
- `src/hooks/useKeyboardShortcuts.ts` - Keyboard shortcuts hook
- `src/pages/SettingsPage.tsx` - Settings page placeholder
- `src/pages/HelpPage.tsx` - Help page placeholder
- `src/app/theme.ts` - Updated Material UI theme with yellow accents
- `src/app/routes.tsx` - Updated routing structure
- `src/pages/HomePage.tsx` - Updated to use new AppShell component

### Change Log

| Date       | Version | Description                                                                          | Author        |
| ---------- | ------- | ------------------------------------------------------------------------------------ | ------------- |
| 2024-12-17 | 0.1     | Initial draft created from PRD Epic 1 Story 1.3                                      | Scrum Master  |
| 2024-12-23 | 0.2     | Updated with Figma design reference and three-column layout requirements             | Scrum Master  |
| 2025-01-27 | 0.3     | Added "Add Notebook" and "Add Notes" button implementations and modal infrastructure | Product Owner |
| 2025-01-27 | 0.4     | Complete implementation of three-column layout, modals, keyboard shortcuts, and theming | Dev Agent     |
